# Product Overview

## Product Purpose

`riot-composables`は，Riot.js v10+向けのComposition APIライブラリです．Vue 3のComposition APIとReact Hooksから着想を得て，Riot.jsのシンプルさを維持しながら，コンポーネント間でロジックを再利用可能にする仕組みを提供します．

### 解決する問題

Riot.jsは，そのシンプルさと軽量さで人気がありますが，ロジックの再利用に関して以下の課題がありました：

- **React Hooksのようなパターンがない** - 関数ベースのロジック再利用ができない
- **Vue 3 Composition APIのような仕組みがない** - 宣言的なリアクティビティシステムがない
- **Mixin システムがv4+で削除された** - 従来の再利用パターンが使えない
- **状態管理オプションが限定的** - 大規模アプリケーションでの状態管理が困難

`riot-composables`は，これらの課題を解決し，Riot.jsエコシステムにモダンな開発パターンをもたらします．

## Target Users

### プライマリユーザー

1. **Riot.js開発者**
   - 既存のRiot.jsプロジェクトを持つ開発者
   - ロジックの再利用性を向上させたい
   - モダンな開発パターンを導入したい

2. **VueまたはReactから移行する開発者**
   - Composition APIやHooksに慣れている
   - 軽量なフレームワークを求めている
   - 学習曲線を緩やかにしたい

3. **ライブラリ作者**
   - Riot.js向けの再利用可能なライブラリを作成したい
   - 標準的なパターンを求めている

### ユーザーのニーズ

- **再利用性**: コンポーネント間でロジックを簡単に共有したい
- **型安全性**: TypeScriptでの開発をサポートしてほしい
- **学習コスト**: 既存の知識（Vue/React）を活かしたい
- **パフォーマンス**: オーバーヘッドを最小限にしてほしい
- **シンプルさ**: Riot.jsの哲学を維持してほしい

## Key Features

### 実装済み機能（v0.0.1）

1. **リアクティブステート（Reactive State）**
   - Proxyベースの自動リアクティビティ
   - ネストされたオブジェクトの自動追跡
   - 変更時の自動コンポーネント更新

2. **副作用管理（Side Effects）**
   - React風の`useEffect`API
   - 依存配列による変更検出
   - Cleanup関数のサポート

3. **計算プロパティ（Computed Values）**
   - キャッシュされた計算値
   - 自動的な無効化
   - 遅延評価

4. **ウォッチャー（Watchers）**
   - 値の変更監視
   - 新旧値のコールバック
   - 複数値の同時監視

5. **TypeScript First**
   - 完全な型定義
   - 型推論のサポート
   - ジェネリクスによる柔軟性

6. **ゼロランタイム依存**
   - Riot.js以外の依存なし
   - 最小限のバンドルサイズ
   - セキュリティリスクの低減

### 計画中の機能

1. **組み込みコンポーザブル**
   - `useCounter` - カウンター状態管理
   - `useToggle` - トグル状態管理
   - `useFetch` - データフェッチ
   - `useLocalStorage` - ローカルストレージ同期
   - `useDebounce` - デバウンス処理

2. **高度な機能**
   - Deep watching - ネストされたオブジェクトの深い監視
   - バッチ更新 - 複数の状態変更を1回の更新にまとめる
   - 依存関係の自動トラッキング

## Business Objectives

### 短期目標（6ヶ月）

1. **コミュニティの構築**
   - GitHub Starsを100以上獲得
   - コントリビューターを5人以上獲得
   - 実プロジェクトでの採用事例を3件以上

2. **品質の向上**
   - テストカバレッジ90%以上
   - ドキュメントの完備
   - バグレポートへの迅速な対応

3. **エコシステムの拡充**
   - 組み込みコンポーザブルを10個以上提供
   - サードパーティ製コンポーザブルの登場
   - Riot.js公式エコシステムへの掲載

### 長期目標（1年）

1. **Riot.jsの標準パターンとして確立**
   - Riot.js公式ドキュメントでの言及
   - 新規プロジェクトでのデフォルト選択肢
   - 大規模プロジェクトでの実績

2. **安定版リリース（v1.0.0）**
   - 破壊的変更なしのAPI
   - 本番環境での十分な実績
   - パフォーマンスの最適化完了

3. **開発者体験の向上**
   - デバッグツールの提供
   - VSCode拡張の提供
   - オンラインプレイグラウンド

## Success Metrics

### 採用指標

- **GitHub Stars**: 100以上（6ヶ月），500以上（1年）
- **npm Weekly Downloads**: 100以上（6ヶ月），1,000以上（1年）
- **GitHub Issues/PRs**: アクティブなコミュニティ活動

### 品質指標

- **テストカバレッジ**: 90%以上
- **型安全性**: TypeScriptエラーゼロ
- **ビルドサイズ**: 5KB以下（gzip圧縮後）
- **バグレポート対応時間**: 平均48時間以内

### コミュニティ指標

- **コントリビューター数**: 5人以上（6ヶ月），20人以上（1年）
- **実プロジェクト採用**: 3件以上（6ヶ月），10件以上（1年）
- **StackOverflowでの言及**: 月1件以上

## Product Principles

### 1. **シンプルさ優先（Simplicity First）**

Riot.jsの哲学である「シンプルさ」を維持します．

- 複雑な設定不要
- 最小限のAPI
- 直感的な使い方

**例**：
```typescript
// シンプルな使い方
const state = useReactive(this, { count: 0 });
state.count++; // 自動的に更新
```

### 2. **型安全性（Type Safety）**

TypeScript Firstアプローチで，型安全性を保証します．

- すべてのAPIに型定義
- ジェネリクスによる柔軟性
- 型推論の最大活用

**例**：
```typescript
interface State {
  count: number;
}
const state = useReactive<State>(this, { count: 0 });
// state.count は number 型
```

### 3. **ゼロ依存（Zero Dependencies）**

Riot.js以外の依存を持ちません．

- バンドルサイズの最小化
- セキュリティリスクの低減
- メンテナンスの容易さ

### 4. **親しみやすさ（Familiarity）**

VueやReactユーザーにとって親しみやすいAPIを提供します．

- `useReactive` - Vue 3の`reactive`に類似
- `useEffect` - Reactの`useEffect`に類似
- `useComputed` - Vue 3の`computed`に類似

### 5. **互換性（Compatibility）**

Riot.jsの既存のパターンと共存できます．

- 段階的な導入が可能
- 既存コードの書き換え不要
- オプトイン方式

## Monitoring & Visibility

### 開発者向けツール

現在は基本的なツールのみ提供：

- **TypeScriptの型チェック** - コンパイル時のエラー検出
- **テストランナー** - Vitestによるテスト実行
- **ビルドツール** - Rollupによるバンドル

### 将来の計画

1. **デバッグツール**
   - 状態の可視化
   - エフェクトのトラッキング
   - タイムトラベルデバッグ

2. **開発者ツール拡張**
   - ブラウザ拡張機能
   - VSCode拡張機能

3. **パフォーマンスモニタリング**
   - リアクティブ更新の追跡
   - メモリ使用量の監視

## Future Vision

### 短期的な展望（6ヶ月）

1. **テストカバレッジの完全化**
   - すべてのコアモジュールのテスト
   - エッジケースのカバー
   - E2Eテストの追加

2. **組み込みコンポーザブルの拡充**
   - 一般的なユースケースをカバー
   - ベストプラクティスの提示
   - サンプルコードの充実

3. **ドキュメントの整備**
   - API詳細ドキュメント
   - チュートリアル
   - ベストプラクティスガイド

### 中期的な展望（1年）

1. **パフォーマンスの最適化**
   - バッチ更新の実装
   - メモ化の改善
   - 循環参照の検出

2. **開発者体験の向上**
   - デバッグツールの提供
   - エラーメッセージの改善
   - 開発モードでの警告

3. **エコシステムの形成**
   - サードパーティ製コンポーザブル
   - プラグインシステム
   - コミュニティの活性化

### 長期的な展望（2年以上）

1. **高度な機能**
   - SSR対応
   - Suspense対応
   - 並行レンダリング

2. **ツールチェーンの統合**
   - Viteプラグイン
   - Rollupプラグイン
   - Webpackローダー

3. **標準化**
   - Riot.js公式エコシステムへの統合
   - 業界標準パターンとしての確立
   - 教育リソースの充実

## Potential Enhancements

### Remote Access
現時点では該当なし（ライブラリのため）

### Analytics
- GitHubの使用状況分析
- npmダウンロード統計
- コミュニティの成長トラッキング

### Collaboration
- GitHub Discussionsでのコミュニティ形成
- Discordサーバーの開設（将来）
- 定期的なコントリビューターミーティング（将来）
